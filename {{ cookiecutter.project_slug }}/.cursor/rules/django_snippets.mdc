---
globs: snippets/
alwaysApply: false
---
# Django Utility Scripts

This rule provides guidance for creating and running utility scripts, data analysis scripts, or one-off tasks within the Django project, particularly those that might be stored in directories like `snippets/`.

## Environment and Execution

-   **Execution Environment**: These scripts are primarily designed to be run within an interactive Django shell where the project's environment and models are already loaded. The recommended way to start such a shell is using `django-extensions`:
    ```bash
    make shell
    ```
-   **No Django Setup Needed in Script**: Because `shell_plus` (or a similar `manage.py shell` environment) handles the complete Django initialization, scripts intended for this context **should not** include their own Django setup boilerplate (e.g., `os.environ.setdefault('DJANGO_SETTINGS_MODULE', ...); django.setup()`).
-   **Direct Model Access**: Models and other Django components are typically pre-imported by `shell_plus` or can be imported directly within the script (e.g., `from main.models import Profile`, `from allauth.socialaccount.models import SocialAccount`) without further setup.
-   **Running the Script**: The common method for executing these scripts is to copy their entire content and paste it directly into the active `shell_plus` IPython session.

## Scripting Style

-   **Linear Code for Simplicity**: For ease of copy-pasting and quick execution in an interactive shell, it's often preferred that the main logic of the script flows linearly. While helper functions are acceptable and good practice, avoid wrapping the entire script's core functionality in an `if __name__ == "__main__":` block if its primary use-case is direct shell execution.
-   **Interactivity**: Scripts can use `print()` or `tqdm.write()` (if `tqdm` is used) for output, which will appear directly in the shell.
-   **Inputs**: Use `input()` to collect parameters when helpful.
-   **Comments**: Don't write any comments.
-   **tqdm**: when looping over large number of instance use this style:
{% raw %}
```
objects = {{Some orm query}}
with tqdm(total=objects.count(), desc="Processing accounts") as pbar:
    for object in objects.iterator():
        ...
        tqdm.write("for progess note")
    pbar.update(1)
```
{% endraw %}
this is just an example. make sure the naming make sense.

## Common Locations

-   The `snippets/` directory and its subdirectories (e.g., `snippets/integrations/`) are often used for storing such utility and analysis scripts.
